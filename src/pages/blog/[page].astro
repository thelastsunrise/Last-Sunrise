---
import SectionOneColumn from '../../components/SectionOneColumn.astro';
import MainLayout from '../../layouts/MainLayout.astro';

const title = "Blog";
const description = "Blog posts by Cat";

export async function getStaticPaths({ paginate }) {
    const allPosts = Object.values(await import.meta.glob('../blog/*.mdx', { eager: true }));
    const formattedPosts = allPosts.sort((a, b) => new Date(a.frontmatter.pubDate) - new Date(b.frontmatter.pubDate)).reverse();

    return paginate(formattedPosts, {
        pageSize: 5,
    })
}
const { page } = Astro.props;
---
<MainLayout title={title} description={description}>
    <SectionOneColumn>
        <p>De blog!</p>
        <ul>
            {
                page.data.map((post) => (
                    <li>{post.frontmatter.title}</li>
                ))
            }
        </ul>

        {page.url.prev ? <a href={page.url.prev}>Prev</a> : null}
        {page.url.next ? <a href={page.url.next}>Next</a> : null}
    </SectionOneColumn>
</MainLayout>