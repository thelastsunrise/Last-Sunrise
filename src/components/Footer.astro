---
import "bootstrap/dist/css/bootstrap.min.css";
import "../styles/global.css";
import fs from "fs/promises"
import { parseStringPromise } from "xml2js"
import getFilePath from "./scripts/EnvironmentRouter";

let latestDate = '';
const filename ="changelog-rss.xml"

try {
    const changelogPath = await getFilePath(filename);
    const xmlContent = await fs.readFile(changelogPath, "utf8");
    const parsed = await parseStringPromise(xmlContent);
    const items = parsed.rss.channel[0].item;
    const fullDate = new Date(items[0].pubDate[0]); // grab newest date in CL
    latestDate = fullDate.toDateString();
} catch (error) {
    console.error("OOPS", error);
}
---
<div class="row">
    <footer class="col-12 text-center">
        <div>
            <p>Last Sunrise est. 2023 &#9734 Last updated <span>{latestDate}</span></p>
            <p><a href="/sitemap">Sitemap</a> &#10023; <a href="/copyright">Copyright</a> &#10023; <a href="/rss">RSS</a> &#10023; <a href="mailto:cat@lastsunrise.art">Email</a></p>
        </div>
    </footer>
    <div class="footer-filler"></div>
</div>